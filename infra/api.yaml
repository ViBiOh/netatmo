apiVersion: helm.toolkit.fluxcd.io/v2beta2
kind: HelmRelease
metadata:
  name: netatmo
  namespace: default
spec:
  interval: 120m
  chart:
    spec:
      chart: app
      version: "0.1.2"
      sourceRef:
        kind: HelmRepository
        name: vibioh
      interval: 120m
  install:
    crds: Skip
  maxHistory: 3
  upgrade:
    remediation:
      retries: 3
  rollback:
    cleanupOnFail: true
  values:
    nameOverride: netatmo
    image:
      name: vibioh/netatmo
      tag: "202403202204" # {"$imagepolicy": "default:flux-netatmo-api:tag"}
    labels:
      tags.datadoghq.com/env: "production"
      tags.datadoghq.com/service: "netatmo"
      tags.datadoghq.com/version: "202403202204" # {"$imagepolicy": "default:flux-netatmo-api:tag"}
    env:
      - name: GOMAXPROCS
        valueFrom:
          resourceFieldRef:
            resource: limits.cpu
      - name: GOMEMLIMIT
        valueFrom:
          resourceFieldRef:
            resource: limits.memory
      - name: VERSION
        valueFrom:
          fieldRef:
            fieldPath: metadata.labels['tags.datadoghq.com/version']
      - name: OTEL_SERVICE_NAME
        valueFrom:
          fieldRef:
            fieldPath: metadata.labels['tags.datadoghq.com/service']
    config:
      NETATMO_LOGGER_JSON: "true"
      NETATMO_TELEMETRY_URL: datadog.observability:4317
      OTEL_RESOURCE_ATTRIBUTES: env=production,git.repository_url=github.com/ViBiOh/netatmo
    secrets:
      NETATMO_CIPHER_SECRET: AgBfCXKT09MUv3rLTadJQ+jUXOTi9opNUOmhjExX4ykjs1qQEvWFgUzPZxCOQgPylqtPLpHtbXvIM3Otv86vvOeE2/tD0t4y7yq7CCCndTAGYaEftx3eiJxlPtpayElgr2S80W2S3RWo2a/fMbJ+0G5Js7DtbBEzT4xj9aBvnXtKWNb3+985YMA2H5h+Ui8xNOmFVOM9x5+3Sl04KFavoJ8KsSY8LcAvIvuJB/0zpOcb9Gi9B2TlLqk9bQFpR2tp3PUoPnmFAPFbrrVEPbseFPeVpTwH04uWyG49HaREO/bauA3HhGthezSUMRQlmlcdpeyzlw9mJ6tKe+tXcA/8e0B9kJHKc0zkVic4WOTwFqjj/Td+HdEDOzPfx4KcP66FEsOMeJNjwnvAg99Kfu+kiM9bIT28VacR6/Qjs+2BfsDOJtLIFIESsonc6Iuh0+25FSDLMQkh809xKtbFgBChZ4BhZlgaLNUPYY7aS+mzJDCDbTLVziTi3KNNy7NKAOkAnRR7wD1S4jyYiFM8eGBycZDzWKPOmHoL+RCjmkCL/JfGiQTIW1V4PeX/LcKFkQLe7iBJra87daqxHDMQayV8qftza8iEFSPeR9FN2LqgHZpDoG7Qfl2T47bKrcv+zbmlxiD20sWFaVDXl0ItLWUSKT4rtIn4wBdmHCBJj58lx/kKDYYQYlNPx7qWjDcskmTfDgs92WcIAsOv2YxgoGnY9AwmSoOGkFNK86MXqYqhk0LGTA==
      NETATMO_CLIENT_ID: AgC9OIAz2rtnSrr8m2WSdw2h9npDa/1t1jiMfLhj1Bzow682hFYRIwWwOgiJ/Qq9CC1Vklah5dkvjX56U9cLeDKdB+ZMGvb9G0bblzYyUMYEFRPbet6IWCbdQ60z1pMiWKuG44u0I8Ba3dswkn2RmV41qAWN5tkt4Y90XF3cOBZTb24K9Pk+O/aJuR7dQU4pSPyWZzqo3bP0GRxASO6DQQIMUknD+dLa82Norx/jC7stpPKfN00/31itYvhLhnEAEc7in4S5adRE+woslQbHewDKlf1jv3zoaoeTPz9XHBNiaFgI/2gMNNKqObeKeZVwbZLK1E/7pOzqH+0EujTrY9MSCQZL/M3xky2r5xagn1ZiKliP90bnqE2C3ae1sst2+kjxtV692uiJd0m7xnhq6sYnW+Hesw5jOnpb4dxF14XmOxtdAPCgeVZo/uWIPGBgoOt+MwGgoA0G1CO5z9780EZfW4nvexTMiJkRmh+aLrZgoRfQ0E7N6ttHe7NfMNUCXkFaRZ0btXmJpPvyo72blWi8j8UfoO45lODWylBn5buHJiiOKGaPdsCF1MHt+QclwraXjkwYwOBk8Qxx05gtFrah5QeyDSjGm1tgV6KXEjcM/PUVASJ0DfeTZJh6IYPaPYYOPMnnSs+iOFueewtVcFU/ZTEyTBycxX+JxxVVwCTNoRUIKBiDwh2ZeAdK1LweDjOiOOhINISa+vtfReJUWVAh4UHcdQh2JGQ=
      NETATMO_CLIENT_SECRET: AgCAx4Qg6J1RGL0zxa9hLvdDQphKTDG8LZJpNLJXz9IiFH2z1cZnTYE8CvAP8X1T5NBwItHfyidTmk+b0Oit0YMXi0WRQ0FSuNomt/TjUoHQH4FKWyi8qovk9DVRdtc5TtoZVNUbYIYXfooziJ9aKYMOWkz+a5l1RuEdxcOC1N3ZKVsZGe9NdwowM2OPV6KJ5AEJuCgMD8PfMv2+STXL18VK5MzR9PkLgi3zzaY1kUQDptslvXsQDaEzjhRJ9wQKgxUKVuqei4KK+obqog1bksNy8I2QYQak6qedcGA59qJBHFOBmuYu8ICefwUABwe6kn3tvG9oXr4VU1rlq24hiOWkpvQ1amfbGI+Ba5knd9vXj55Hyrw+kEaEOJo67vyer+8DCDnaSpSw9ENJg49NuQbRwdZZ2K7fLfSiyde9yeL4RgUp7WmMGBdcJvpTxl+F3WQsjxhaYX2wIXLzHLdYGr/YcFpk7Gr5wYUVg37va5x6zYAx/NGxm0cZZZaZBBiZbrOnV8W9mmhwOwW5OZZwTgGvDgNtLK34HPgRtX131VlC+OD8jy7WLmubYai8cRMniZ7swFtTGUbwnU3GkMCzcxyRyLwKPZYvf9Xgrw+QmmC0N2HYgPT0mqe0SUWwd3TGwRslns6sRkyMx1zf0rgIJp6g8D0CqOrL+Nrt0+V7TEV6Pz/C8bZklHtsU9JsAB1p2w1z6kv/bVLgVyot7+OzAlHUUP0QjeVPHAxiBhN79W3sgzp5iuAIbMd+lA==
      NETATMO_SCOPES: AgA6RHEsf1G9yLMwuSr+AwmFI+QCYN3QNo5vjh65i3M6N40blZTCkrYMRkDJ9whC8IqqafdCITdQy8QyJ8I9KqO+bc0hae1CXbQoYwhtyz2NgnZnWcPL/PsHsYAezxFP/SPJv0Wgg7n/Ezg9N+dpNAH0niEWqXDDz/rNjaRAlTIrFEyzbZjnWtaCleBiX7XfMaTv84hLKdv2L/26MSzoxG6VMypQuq5SbkzwIj8BfH1X0jyxaSaXLsQEEk6x1yqFbKK2HjhsVumBVqvxQZue7aLrvhWQjIrjO1J5eRf8mneNAOaEWc84kS3byrd0xRmAxnSbiTVasoILsnT9aPfhhjGYWj66A3HzUw1ru9gAUrxK6b48zS+w0KJLCUcTZj/MVIxgyVtFJo9CUfpdlxhu5JrSDbIgAypQCipZY5wsjiNzryMu/FUdHzjT8Nqi2Qi63YDLKAlTr9aTd7lEbtdrfWUR6B/zj4G9M70hchoUonFVEtwALxlDM0Er14UKdXrCviGlp2RsKS2ov4ti6m8SZr+NoHTLQOPVyXI8iWxK9+phuvlxZWhAwLojdQzAMborzR3UALliP2QtxeT1YjicDK84xRgEkrJEdLso3gsMVw3DCCXm4CHliBXuFnBxSlhsJFPTD7l54n6dKuvFVtSC/mEipPgSOssG7q/ru/qIKMoVWIjYkdn2k37NldEn7aRGnjw8lZMH3vs0ZQV/Z1YhmiW/vu+GiLafOVQfbd4=
      NETATMO_STORAGE_OBJECT_ACCESS_KEY: AgBWB9YXwXKT2xKFtu5E0SxkpPaAXSQ4ww5weBmtYM3V6ESMCW3OsjI851NCW38SlpV7fZ2ARdNvdSo29Cl9PLkRWsGzA8sica4QFJDokjjRBevYi/uAB8N1y+LUZKMwoC8F/fNCa/OTpFdaqtBLITSSVFmRtP7kYtzKQotuVDwvwJBsMB/4TF2v9JbssNQ56SwVeCqiMbxXYSB1NwefvNU0Qg3DmQYXdnVqa/kEgeKhETvmJiOyyJsReoDpZ17LsH/orrBr87pSdOlSi2d7TEnB0r2O7bt2uaFaHtaxvvTwle5t27HcRh0zN+/RHI2rSyRJ1I6SZAe5qCU/PmpNI1w5h+MCdFrFoLqmPbKfgekDuCDcWjXk1sxsN4zOAWDDeXDDQQ3cMMPY6TI4HOMDansQFhPE7O6PjRbT22X2qrnDvAPAQzF9HSFmOEaQw+NoQLD4e3MruoPvL0oSuLfO1H7ypkp56NIcEmCZRH+pQ3Zo5CSwQzsrRj+23dABzZW2LBwli1dRY57sPMPehqveO8Yo1ZPacftGtG8sBnf9i83cjsdn7F0cA20kkg8UfmsqKJVX3W23+ynSnG9elc2vA9Uw6zc7uPUS3Bf0runhUFWBwz8+jvZgpHLPK6OFoVzXqz4bZpafNfPZRVCbpWPqZKc3bJIGaEke4NHB8Nl9de9EYBywVT7WdoJGJGW9buxIWikL+qDLr9TEosTUiT7PVymPgC0ziw==
      NETATMO_STORAGE_OBJECT_BUCKET: AgBzCrw8JEeGfmh5P6E48Iqm7D+2CIyCsyQKIej1khJYrbavyJEq8Mzo5nTkIfAfz00X8FV4Sp0OFk9jhXjNuKT2JtTgvBrXH9dHXai4XVBo9sMBjY9Q5K4Pol/0KeR3Dq9mnrtXZzDAwF/97EQcjF1gBnK8o4gyoP6f8ENsABlaGoGpIMNjkInwEUV4gQe7b0vTf4BzFT3ErIu56G8PtvrZeCd9x8z6Acro3vCrh7gnR3lvTbMEwrx3lTPP0X8ngwc95jE2YppNXvQ5Dq2l4ZZcOzO6tbOH2nexWqSRXD88MpkzjIB6Q8NkrAISs0H6gztNcVXMpTsVslbEvoYXuScBuGqO7Oj9yD9E9MX6PnsDLFWu4zVOZOQPbWXN0u6HEHnlQiOAmq06GOvGiY3/bMOa5qOqe3uP06RGCnRmUfBtlw+OT/DTVw3p8WL9X5R5Z4/3omF0IgqbcDobf7xsy4bNMdV+S27sYsqx3gNHvs9kLxnTIwK+gMAKqES+Xzp5wnXeJBQ8HpnmnPUywkHaFvHWqLH/E6FnuhSd2cEF30GG88ZMP2EObz2sAv1U38ZJkiD59kgzM74Rtel9/bcQuiMbiazYt0+8eM555a1iN5juAABcSD53Ge5FeUdRDosrNEryusIju7lKZQjHqubp2llW3Nh7vr9CHaKMlh5fc7zd3L/aXXoN5UG3HolODzc+zCmnrt7F
      NETATMO_STORAGE_OBJECT_CLASS: AgCINSFROrPdzzZKWS9QRWbt/ub7HIDBIOo6qu1t/JSjfXVtE5AaTIB+NQ395xzfpFPJ7g08seYfN4f2Zpbor3ZMOoQDwAoPY2EjFgBpQmRse7+w89lO0Lvqihqxwj/n7ah4/1WwIqZidvlMU6DFgquIqxkaMbJOoR69CVXacuLeLWhZfwSd/blUayYlfedszEAh5gAYZ1Ju4Zh2MlVJ7cjhrEynLr290xOgsl4CxVG0Hgi+h/hn0JsOaXLaqy7ceGSfoOKc6i0vDy5Qq77qHE4CiI8qaIB0JZf3MEOBcg8KFm+HLiRXFuVzF/6YtBC254gkckkNeCVftz0tZKMequfwxrxQTS5d4g5fsPSDcijiar/MzDti58/GpflJzD5dh1tl0alqaRGKn84y3BMzYEjQ2yAvhrY49ld7GTxzjIU4KduL7Ni3bKPbm3UpIi4LmsqmxiCBXQ0jmNCvorp3Blja8G2SMYdxDdqa2noZWNtPyojGKWYmYiCIviHj0Hni8p6IKP3EAX1zQ+mMcZB6s7H4qZJWhMmgWVijXPhGRCIyJmfHUX8q4QRmYEqkI4JVziKOPKkmTVO1U6ws9UKF6yN0pvNbiNEh5pAtMEIFEr6rC3E14Zj69xPZt48xj+YUWHWGt1auYNKzSqGS7oK0eesLrN4PH61w7L+Ol1CAmEeVgc5X0aGJzydoEnr0WQiI1+vRh3JjH6fUSlA/
      NETATMO_STORAGE_OBJECT_ENDPOINT: AgC+90CAmkr9J4QM1ml0rs9rTIDGpv8x7NazOHdP7xSqu+TUBczwJJwsd/CIW2lliB9z/57eIJ6efxVbLCN9liNEaPUT2n34Io9iHGM1XPiJw8w51orS+JG2aUvaBKlo7usTimUzAQnQrYI6cjogLYalyQ1pDx2lCH9fgtH8sm25/1k1KNKcadnuVv+uk6qN6NwOwfaGwzKOZZksRoiHWIxfpjkyTYibaajJHImWqz5hvdVcpPaHrK06IEpf8gXa18fvQmt+oobaoW37RGbE7o+YUNFoALLUdmLW57EqOgDaQgrj+aGJdXuEjSyp1Nw35IRvSAa8sRtwy34WUu7utXLu9YQzPU6wzlmU+n3dkt+aFwTkG82eMqh2NU+kXfvlHvmPFhAnD3JL+MqElbJ3h00RVa4iwESjqB6OiPpghucqOao2l7zfRQ/Y/JNs8UIJuTg43dZp6Zk47MEOfr0s8gplm/y10Fb/toHkbRp9FwXGwqdjgE0CPUAuhigPRyFLzhibuJ7/ofH9ioQzKNzbXQAT4moBiVdZLoxZLO8SIN6tP2D6nA1/jhF7EfVIMNUKB8yZX9ILH+sVFcghJWprmKhb+ZvaubK+4fU11PsmWDigP97bysw0r3K6JDdrPwG9yj0eRJsDVlH+sx0JCiJyphC2hUfiByfE2BupbaGMRerFpAu+IcGhwPw3nBSB1cs8s0ahlypwBOhev7WVShSQTkcYZBGz
      NETATMO_STORAGE_OBJECT_REGION: AgCg7uxjY3zmv6K+yPBaMRxUVwcp/XCbEWWcWjgC2AKfZaVmtorYKKIqOOB9cOzSFXArYN/p6OTHL/YGuq8FTRIFssYwuVU39vrXuMpZhfbKGSRZlbxj53X27EmKz939akc7h19hkNnmFoti3RIejbCyAwfikZufZs0TNnNDVOHp5qJk+eNT5yevZxqgB7vK7hYERimP00kuo1BsaU+BQiy1AqMs02wXMvsIHeaNeiltG1gdZHbBcN4A2Bf+FH5DnzpzgEHmxRvZLwEZxnwhSxihUSqRvq44FdMbso9G6vl1PoWvnqln+Tr9MOfkzkRkHwtG3meulTaPesZG7qLPLJoauFucwS6s6BW31xeOMUXYBO3K2uDk5L2zVnD1imjMxWhBsxrz60UGW1x36/BxspLrNacBaiM7GOUonArIVfCx7uLQGO7Ctukviuw7dL6XY+ZhzsWElPHqV65F3ILs0gQLjpflkSbwe0RjyFKsiDQwFhVjmEepervQcgK44PamVaQLqVUW/D8qvzwzV0kRQ9ozArYjNOfnKuhyWGlpNrt21uJmIP94wiKgPCbmFz3JmfqgexP1wcvnVBvpd5vjoMy7grgaQdidO9MNT0k+hgfTCZ4OMFaiCzEKcz+G6FC2EFL5lHhhxa8EHnw6LvBwjXsPAVqcs6jcbzmDH0Jrdk/oe4GtXeZQuFQmhzdMRJvsEtW2l5u4+RM=
      NETATMO_STORAGE_OBJECT_SECRET_ACCESS: AgAk/nKsSaWp2zo2dTiNSp9Ebh6HiGzcefL1ee6EXn/g9uzmW0px6921car7kdtjXzSH8chLhBYnICYHtP+F09O4YCLIUOJY9Z6iSKuCsTn5Je7NOotpxaTjLTrxyvw4DLoW1SlUoJ7zZ0bom6fbfABc8WzTtzlEkGy2Jmo+Zt96iZhRSJg7StaoTokQ47v+rJjEY7RYuIl3LOmI8CTTNiGdzWLy06vH1LeScZ2M/dk5G4SmYR74yRmbHF8gWO5qETQw6PXylSjY6cC2wBLU6CQg6n8vgJxAZc7kNp+vMDK668nDl0J4T6VwI9/qI4g2makLkz4g+ggIibo1ngKzHYUKPXGxcriArM+8eVi0KbQ2RkBr/EZzbOZd50wMmDfa0jVFaDmpztXKjN1fFsrkFETLWqeIaeXw1YkwJ/H0BEdZUEtGfyrbWRtpA/tkv7u+ty9MtQkkvdnDyEhJxl88ugUF7ZoWCVxoGerfBjDj9ZFLpMScDMNiM3K4mp7pAsOCZ9ZRvGvMVewu2/YqzpmB+N8HdYDcFvRDY2Yh5FpPMOtkvNaOfAHrSo9/QiQC3gpNeI1IzH/PQ8enjUsBWzfVJWsCm61XX7lJ6rh3l60uPMZPrZqUADVaBYwN0dzPLuAJ8uzyz+6CSQUn+0eQbGUwN17lQ+IB+r2rUrOlrZG92ToSCgddjHduht74ZmzrF4+0U1A7AY45mQBcbK3IqnpwO+M9wDuBEh5+X/b+PHwuLLKGi5epAsA=
    pprof:
      enabled: true
    service: null
    probes:
      enabled: false
    autoscaling:
      enabled: false
